# 交易工具

## 1. 板块介绍

交易工具是掘金量化终端的五大板块之一，提供手工交易、算法交易、组合交易、文件单和数据归档等交易工具。

其中手工交易和算法交易的页面结构一致，可以分为四块：操作区、行情区、账户概览和持仓概览。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4aca1f065d4.png)

组合交易、文件单与数据归档的页面与功能各不相同，将在下文单独展开介绍。

---

## 2. 手工交易

手工交易是指我们通过输入相关参数手动下单交易的一种方式。

**功能**

手工交易支持股票和期货交易，操作区共分为三个部分：交易、查询和其他。

在进行交易前，需要先指定交易账户。

![交易账户](https://www.myquant.cn/uploads/202104/attach_1675ae9dc3d36876.png)

> 没有实盘账户的用户只能选择仿真账户。

交易部分可以进行手动下单，共分为买入、卖出、撤单、市价买入、市价卖出、盘后定价买入、盘后定价卖出 7 个功能，可根据自身的需求选择对应的交易方式。

![交易部分](https://www.myquant.cn/uploads/202104/attach_1675aea3f1b3ad7b.png)

查询部分可以查询持仓、成交、委托信息。在当前持仓中，也可以手动一键卖出，也可以选择单个标的卖出。对单一标的点击卖出后，会自动跳转到”卖出“页面，手动选择委托价格、数量等参数。

![查询部分](https://www.myquant.cn/uploads/202104/attach_1675aea87bf492fd.png)

在未结委托中，可以一键撤单或单独撤单。

![未结委托](https://www.myquant.cn/uploads/202104/attach_1675aeaf6b6e9b8a.png)

此外，还可以通过图示的“导出”图标对持仓数据进行导出。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4b3d7835518.png)

**入口**

点击“交易工具”即可进入手工交易页面。

![手动交易](https://www.myquant.cn/uploads/202104/attach_1675ae94809e4643.png)

---

## 3. 算法交易

算法交易适用于母单订单量较大的各类程序化、手工交易场景及其他频繁换仓的用户，母单执行时间大于半小时以上的交易执行，效果更加显著。

**基本规则**

- 算法交易工具仅支持股票交易；
- 部分终端版本无算法交易，以实际有算法交易的实盘为准；
- 算法交易自动拆解的子单等同于普通委托；
- 算法交易自动拆解的子单全部为限价单，且会在终端委托列表内同步显示；
- 算法交易仅管理维护本次任务算法拆解的子单，而不会参考其他等同条件下的其他单。

**算法限制**

- 如股票出现临时停牌或涨跌停时，有不能完整完成客户委托数量的可能；

- 用户当日委托的交易金额过大时，可能受到市场流动性不足的影响从而降低算法运行的效果，建议母单量不超过指定交易时段内预期成交量的 15%。

**掘金目前支持的算法**

- TWAP 算法：时间条件优先，能够较高效率的完成拆单任务，用于对时间要求比较高的算法委托任务
- VWAP 算法：市场成交量条件优先，能够更充分的考虑当前市场流动情况，算法决策自由度较大，较高效率避免瞬时冲击成本，用于大单量且价格敏感的算法委托任务
- ATS-SMART 算法：根据用户委托交易特征，通过对市场高频数据的实时分析和处理，利用程序化分析动态选择最优算法执行用户委托。具有高完成度，高稳定性，高隐蔽性，低敞口等特点，在不同持仓风格场景下，中长期均体现出稳定超越 TWAP/VWAP 基准的效果
- ZC-POV 算法：比例成交算法（Percentage of volume），通过追踪目标股票流动性，按照市场参与度完成用户委托交易。算法针对性解决股票交易中大金额委托造成的交易冲击、目的暴露、完成率低等问题，更加贴近客户的真实委托意愿

**掘金算法交易的特点**

掘金算法交易采用云服务算法模式，相比策略级算法交易或者本地算法交易有以下特点：

- 行情/交易延迟小，委托任务的拆单算法在券商专有机房执行，专线行情+内网极速柜台接入
- 算法可靠，服务级经典算法模型，tick 级盘口分析，并提供多项控制参数
- 运行稳定，执行过程的母单（原始委托任务）、子单（算法根据原始委托任务自动拆解的可执行委托）、回报实时推送到本地

**入口**

在“交易工具”版块下点击“算法交易”（如果版本支持算法交易）即可。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4bc66a8f5fa.png)

---

## 4. 组合交易

组合交易也可以理解为一篮子的买卖。用户可以通过手动添加或导入篮子，完成一组股票的买卖。

**入口**

在“交易工具”板块下，点击“组合交易”进入页面。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4c47cd40552.png)

**步骤**

1、点击“交易工具”中的“组合交易”进入页面，此时默认有一个篮子，您也可另外新建篮子；

![篮子](https://www.myquant.cn/uploads/202104/attach_1675af085da8b2ce.png)

2、选择并连接交易账户（仅股票账户），然后选择交易类型（目前只有普通股票交易）；
![img](https://www.myquant.cn/uploads/202103/attach_1668792345066fdf.png)

3、新增成分股；

可以手动逐个添加，也可使用 csv 格式文件批量导入，直接导出篮子可以获得空模板，也可以在旁边点击帮助按钮，一键导出空模板，以及阅读导入说明；
![img](https://www.myquant.cn/uploads/202103/attach_166879289f593330.png)

4、填写委托参数；

“委托数量”可选：按照表格填写数量、按照表格填写权重；

![](http://www.myquant.cn/uploads/202111/attach_16b3f4c7f82015af.png)

若选择按照表格填写权重下单，则需要填写预计买入金额。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4caf8056fc5.png)

“委托价格”可选：市价、最新价、指定价。选择指定价时，请确保每只成分股填写了委托价格。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4ce730af86c.png)

5、篮子校验；

当委托参数设置完成后，点击右上角的“刷新篮子”可以查看每只成分股实际下单数量和预计成本（市值）。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4d1ef14a6ae.png)

勾选“过滤涨停股”或“过滤跌停股”并点击“确定过滤”，可以将所有的涨停或跌停的股票过滤。

![](http://www.myquant.cn/uploads/202111/attach_16b3f4d4ff48d660.png)

![](http://www.myquant.cn/uploads/202111/attach_16b3f4d80cfd68f4.png)

点击“验资验券”，一键校验可用资金和可平数量是否足够，以及校验填写的正确性。
![img](https://www.myquant.cn/uploads/202103/attach_16687931dbed0a13.png)

6、下单并跟踪下达的组合任务；
点击下单，然后可以在组合任务看到这个篮子下达的委托，并进行撤单的操作。
![img](https://www.myquant.cn/uploads/202103/attach_16687936833a5cfe.png)

7、保存篮子。
篮子在重启终端后将被清空，所以记得导出篮子保存在本地哦！
![img](https://www.myquant.cn/uploads/202103/attach_1668793a8a1503df.png)

以上就是关于“组合交易”的具体操作步骤。如需再新建一个篮子，按照上述步骤重复即可。

---

## 5. 文件单

文件单是掘金量化终端为用户提供的一种委托指令的处理方式，让用户的委托指令，能够以文件的形式，提交给掘金量化终端进行报单处理，并通过文件的形式，获得相关交易数据的结果反馈。

> 目前，掘金量化终端支持 dbf 和 csv 两种数据文件格式的文件单。

文件单处理流程图：
![文件单处理流程](http://www.myquant.cn/uploads/202012/attach_164e4fa97ef1ff7b.png)

**入口**

在“交易工具”板块下，点击“文件单”进入页面。

![](http://www.myquant.cn/uploads/202111/attach_16b3f6170d6403bc.png)

**步骤**

1、准备交易账户；

进入“账户管理”板块，添加仿真账户。 我们新建一个账户，名称为王富贵。

![](http://www.myquant.cn/uploads/202111/attach_16b3f61a92e70d55.jpg)

然后为刚创建的仿真账户转入资金，以便进行测试。

![img](http://www.myquant.cn/uploads/202012/attach_164e5f5c99aa4b05.png)

2、新建文件单输入路径；

打开“交易工具”板块，选择“文件单”进入文件单配置界面，如下图所示：

![手工交易](https://www.myquant.cn/uploads/202105/attach_1682e26d927b1014.jpg)

点击“新增”，输入名称为“王富贵的文件单”，设置文件单的输入目录的路径为： C:\test\scan_order

![文件单输入配置](https://www.myquant.cn/uploads/202105/attach_1682e2b3313727a7.jpg)

如果我们的下单的策略需要获取委托执行后的反馈数据，则需要开启对应交易账户的文件单输出。

> 文件单输出的数据项分成 6 类， 每类数据对应一个数据文件。

![文件单输出配置](https://www.myquant.cn/uploads/202105/attach_1682e2f8b32b266b.jpg)

3、启动文件单输入；

准备下单前，请检查使用文件单输入配置是启动状态。

> 勾选自动启动，可以自动启动重启终端时未停止的文件单

![](http://www.myquant.cn/uploads/202111/attach_16b3f61ebb76425c.jpg)

4、启动文件单输出；

准备下单前，请检查使用的交易账户的文件单输出是启动状态。如果您的策略程序不需要用到文件单输出的数据，则可以不开启。

![](http://www.myquant.cn/uploads/202111/attach_16b3f62162fc3b15.jpg)

5、在输入路径写入文件单；

完成以上步骤后，点击页面弹窗中的“详细文档”。

![](http://www.myquant.cn/uploads/202111/attach_16b3f62b51afda8d.png)

然后在跳转的页面中点击导航栏里的“策略下载”，下载掘金提供的示例策略。

![](http://www.myquant.cn/uploads/202111/attach_16b3f62f050af25c.png)

将下载好的文件保存至与“in”、“out”所在的同一文件夹中并解压，然后用 IDE 打开其中的“scan_by_csv"。

![](http://www.myquant.cn/uploads/202111/attach_16b3f632b5af69f8.png)

修改代码中的输出、输入路径以及账户 ID。

![](http://www.myquant.cn/uploads/202111/attach_16b3f63766d1e92a.png)

6、执行策略程序下发文件单；

运行策略后，可以看到显示下单成功。

![](http://www.myquant.cn/uploads/202111/attach_16b3f63ab1d3e0f9.png)

进入终端的“文件单”页面即可查看对应记录。

![](http://www.myquant.cn/uploads/202111/attach_16b3f63e1878b050.png)

---

## 6. 数据归档

数据归档可以查看当日该账户的交易摘要、资金、持仓、成交、委托、委托流水、日志和文件单。

**入口**

在“交易工具”板块下，点击“数据归档”进入页面。

![](http://www.myquant.cn/uploads/202111/attach_16b3f65540d25ad2.png)

**功能**

数据归档默认是未开启的，如果有需要则在右上角设置开启数据归档即可。

![保存期限](https://www.myquant.cn/uploads/202104/attach_1675aec41f01d984.png)

归档数据默认保存一周（七个自然日），还可设置为保存一个月、半年或长期，归档数据超出保存期限将被删除，注意需要停用数据归档后才可修改。

可根据需要选择具体日期下的具体账户。

![选择账户](https://www.myquant.cn/uploads/202104/attach_1675aecde70bb4ae.png)

数据归档主要包括：摘要、资金、持仓、成交、委托、委托流水、日志、文件单共 8 个部分。

![数据归档结构](https://www.myquant.cn/uploads/202104/attach_1675aed18ed8c49e.png)

摘要包括基本概括数据、耗时分析、委托数量与耗时占比与异常合约汇总表。

![摘要](https://www.myquant.cn/uploads/202104/attach_1675aed8832ed904.png)

资金、持仓、成交、委托和委托流水展示了该账户归档的资金、持仓、成交、委托和委托流水状态。其中委托流水展示了按时间排布所有委托的完整状态变化过程。

![委托流水](https://www.myquant.cn/uploads/202104/attach_1675aee0c3f77fcd.png)

日志主要展示该掘金用户下所有账户的主要系统事件，不展示具体的每一笔交易事件。

![日志](https://www.myquant.cn/uploads/202104/attach_1675aee4db34ab32.png)

数据归档各个部分均可以进行表格筛选，用户可以根据自己需求筛选想要的结果。

![表格筛选](https://www.myquant.cn/uploads/202104/attach_1675aef60e33a71b.png)

详情请查看-->[专题-交易归档](https://www.myquant.cn/docs/subject/statistics.html)

---
